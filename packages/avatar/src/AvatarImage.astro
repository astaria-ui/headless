---
import type { HTMLAttributes } from "astro/types";
import { AvatarComponentNames } from "./constants/names";

interface Props extends HTMLAttributes<"div"> {
  src: string;
  alt?: string;
  referrerpolicy?: ReferrerPolicy;
  crossorigin?: "" | "anonymous" | "use-credentials";
}

const Primitve = AvatarComponentNames.AvatarImage;

const { src, alt, referrerpolicy, crossorigin, ...rest } = Astro.props;
---

<template id="astaria-avatar-image-template">
  <img
    src={src}
    alt={alt}
    referrerpolicy={referrerpolicy}
    crossorigin={crossorigin}
    part="image"
  />
</template>

<Primitve
  src={src}
  alt={alt}
  referrerpolicy={referrerpolicy}
  crossorigin={crossorigin}
  {...rest}
/>

<script src="./lib/AvatarImage.script.ts"></script>
<script src="./utils/imageLoadingStatus.ts"></script>
